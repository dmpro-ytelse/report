\section {Design choices}
This section highlights and explains the choices made relating to the hardware of the final PCB.

\subsection{Input/Output devices} \label{pcb:design-choices:ss:IO_devices}
This section presents the Input/Output (I/O) devices that were selected and discuss alternatives that were not.
An I/O device or channel that can be used to communicate between a computer system and the outside world (or another computer system).

\subsubsection{Secure Digital (SD)} 
The Secure Digital (SD) memory card format was chosen because there were SD cards available in the lab and most of the team's members' laptops had SD card slots.
The microSD format was considered, but guidelines on how to use and implement it were scarce compared to information about the larger SD format.

In the SD interface, there are several protocols used for communication. 
The ``Serial Peripheral Interface Bus'' transfer mode (``SPI bus mode'') was chosen for the project as it allows the microcontroller to communicate with the SD card as if it were a bus.


\subsubsection{Universal Serial Bus (USB)}
The USB interface was chosen because USB connectors are prevalent on computers, and every team member's laptop had at least one USB connector.
A micro-USB interface was chosen because it was the smallest USB compliant interface available, which meant the associated hardware would take up less physical space on the PCB than its larger siblings'.

The design also includes circuits to prevent undesirable effects like electrostatic discharge, preventing the signals from picking up unwanted background noise, and crosstalk (disturbance of the signal from signals in other circuits).
Resistors were also added to prevent short circuiting.

There are several configurations applicable to the USB interface.
The USB protocol specifies that there should be one host (or ``master'') and at least one or more ``slaves''.
The master is responsible for managing the connection to its slaves, and should also be able to provide a 5V current to its slaves if needed.

In Barricelli's case, the microcontroller functions as a self-powered slave.
The device that is connected through the USB interface in order to communicate with the microcontroller functions as the master.

The circuit design was copied from the microcontroller's developer's application notes~\cite[Figure 2.2]{an0046}.

\todo{skal vi skrive at vi kopierte designet, eller include bildet vi referer til og si hvor vi fant det?}
%insert picture from http://www.silabs.com/Support\%20Documents/TechnicalDocs/AN0046.pdf
% cite page 5 ?

\subsubsection{Serial Port/RS-232} 
RS-323 (colloquially known as a ``serial port'') is a communication standard which is implemented through a serial port interface.
Even though serial communication was not required due to presence of USB interface, the decision was made to implement it.
The serial port serves as a backup for the USB as the chosen microcontroller supports communication over RS-232.

\subsection{FPGA} \label{pcb:design-choices:ss:fpga}
\todo{which one did we pick?}

\todo{why did we pick this one?}

\subsection{SCU / Microcontroller} \label{pcb:design-choices:ss:scu}
\todo{which one did we pick?}
we got the giant gecko one because we had the dev board for those lying around in the lab and also we picked the model with the most memory? \todo{VERIFICATION REQUIRED}.

\todo{why did we pick this one?}

\subsection{Communication} \label{pcb:design-choices:ss:internal_communication}

The two major components on the system are the SCU and the FPGA.
They each fill an important role, and work on essential tasks.
The system need them both to work together, and to accomplish this we need a communication channel.
On Barricelli this was accomplished with by a 41 bit bus.
This bus have 16 bits of data, 19 bits of addressing, a small 2 bit bus to control the state of the processor and 3 control signals.
The statet bus detemine what the FPGA should do with the data, while the control signals tells the targeted unit what to do with the data. 



\subsection{Memory} \label{pcb:design-choices:ss:memory}
When the group talked about selecting memory, there was lots of options.
The FPGA group needed a memory that could provide fast accesses in order to increase efficiency.
In addition a memory with large inout/output size was a goal.
Because of this, the group decided to use SRAM because of the fast access times.
However, the downside with these memories is that they are small and expensive.
Still we ended up with 8-MBit modules with 16bit input/output size, 10ns write cycle time and 10ns read cycle time.
A larger size of the memory could probably have been chosen, without any risk of going over the budget.
However for the task that the FPGA is going to perform the current selection is sufficient for our use.

