\section {CPU Architecture}

\begin{figure}[H]
\includegraphics[width=\textwidth]{dmpro/Sketch 2 - FPGA Architecture.png}
\caption{FPGA Architecture}
\label{figure:fpga-architecture}
\end{figure}

The CPU architecture designed for the Barricelli computer is a very clean design, and the key to its high performance lies in its simplicity.
The architecture contains a number of general cores, which in this context are named fitness cores.
They are responsible for all the general computation involved in ranking the chromosomes.

The common genetic operations (selection, crossover, and mutation) are performed by a separate hardware accelerator pipeline consisting of several operation-specific special cores.
The fitness cores and the genetic pipeline are all connected to a single data bus.
To avoid any memory synchronization issues the data bus is controlled by a central arbitration unit.
In this design, the memory controller is responsible for synchronizing memory access.
Each component that wants to access memory must go through the memory controller, and request the bus.
This may introduces a potential bottleneck for memory bound problems.
Fortunately, genetic algorithms only use a small amount of data in the ranking of the chromosomes.
This implies that a high number of registers in each core should be sufficient to avoid any memory spill during computation.

In the selection core, on the other hand, the core needs to be able to access the data bus very frequently in order maximize the throughput.
Since the fitness is computationally bound, the data bus is more or less available for the selection core.
This allows the genetic pipeline to compute the chromosomes required for the next step before they are required by the fitness cores. 


The instructions are divided in two caches for increased performance.
The plan is to make the instruction caches sufficiently large to contain the whole program.
Since the instructions are read only a simple scheme will be used whenever the program needs to get instructions in those circumstances when the cache is not sufficiently big to contain all the instructions. 
